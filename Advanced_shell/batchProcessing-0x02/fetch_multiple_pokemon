#!/usr/bin/env bash
# Fetch multiple Pokémon JSON files and save them under pokemon_data/

# ensure output directory exists
mkdir -p pokemon_data

# list of pokémon (lowercase)
pokemons=(bulbasaur ivysaur venusaur charmander charmeleon)

for p in "${pokemons[@]}"; do
  echo "Fetching data for $p..."
  # -s : silent, -S : show error if fails, -f : fail on HTTP errors
  if curl -sSf "https://pokeapi.co/api/v2/pokemon/$p" -o "pokemon_data/${p}.json"; then
    echo "Saved data to pokemon_data/${p}.json ✅"
  else
    echo "Failed to fetch data for $p — logged to errors.txt"
    echo "$(date -Iseconds) Failed to fetch $p" >> errors.txt
  fi
  # polite delay to avoid hitting rate limits
  sleep 2
done
